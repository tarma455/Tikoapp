<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TIKO ‚Äì Vacunas</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#22c55e,#06b6d4);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:white;
  width:92%;
  max-width:420px;
  border-radius:16px;
  padding:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.3);
}
h2{text-align:center;margin:0 0 10px}
input,textarea,button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
}
button{
  background:#22c55e;
  color:white;
  font-weight:bold;
  border:none;
}
.item{margin-top:6px}
.label{font-size:13px;color:#555}
.value{font-size:15px;font-weight:bold}
hr{margin:12px 0}
</style>
</head>

<body>
<div class="card">

<h2>üíâ Registrar Vacuna</h2>

<input id="vNombre" placeholder="Nombre de la vacuna">
<input id="vDosis" placeholder="Dosis">
<input id="vFecha" type="date">
<input id="vProxima" type="date">
<textarea id="vNotas" placeholder="Notas"></textarea>

<button onclick="guardarVacuna()">Guardar vacuna</button>

<hr>

<h2>üìã √öltima vacuna</h2>

<div class="item"><div class="label">Vacuna</div><div id="nombre" class="value">‚Äî</div></div>
<div class="item"><div class="label">Dosis</div><div id="dosis" class="value">‚Äî</div></div>
<div class="item"><div class="label">Fecha aplicada</div><div id="fecha" class="value">‚Äî</div></div>
<div class="item"><div class="label">Pr√≥xima dosis</div><div id="proxima" class="value">‚Äî</div></div>
<div class="item"><div class="label">Notas</div><div id="notas" class="value">‚Äî</div></div>

</div>

<script>
function guardarVacuna(){
  const datos = {
    nombre: vNombre.value,
    dosis: vDosis.value,
    fecha: vFecha.value,
    proxima: vProxima.value,
    notas: vNotas.value
  };

  localStorage.setItem("vacunaActual", JSON.stringify(datos));
  mostrarVacuna();

  // Enviar a MIT App Inventor (si existe)
  if(window.AppInventor){
    window.AppInventor.setWebViewString(JSON.stringify(datos));
  }

  alert("Vacuna registrada ‚úîÔ∏è");
}

function mostrarVacuna(){
  const datos = JSON.parse(localStorage.getItem("vacunaActual") || "{}");
  nombre.innerText = datos.nombre || "‚Äî";
  dosis.innerText = datos.dosis || "‚Äî";
  fecha.innerText = datos.fecha || "‚Äî";
  proxima.innerText = datos.proxima || "‚Äî";
  notas.innerText = datos.notas || "‚Äî";
}

// Leer datos desde MIT si existen
function recibirDatosMIT(){
  try{
    const datos = JSON.parse(window.AppInventor.getWebViewString());
    localStorage.setItem("vacunaActual", JSON.stringify(datos));
    mostrarVacuna();
  }catch(e){}
}

mostrarVacuna();
setInterval(recibirDatosMIT, 800);
</script>

</body>
</html>
