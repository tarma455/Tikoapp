<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cartilla MÃ©dica - TIKO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(180deg,#0f172a,#1e3a8a);
}
.card{
  max-width:420px;
  margin:20px auto;
  background:#fff;
  border-radius:16px;
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}
h1{text-align:center;margin:0}
.section{
  margin-top:14px;
  padding:12px;
  border-radius:12px;
  background:#f1f5f9;
}
.section h3{margin:0 0 6px}
.btn{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  background:linear-gradient(90deg,#2563eb,#06b6d4);
  color:#fff;
  font-weight:bold;
  margin-top:12px;
  cursor:pointer;
}
.back{
  background:#64748b;
}
ul{padding-left:18px;margin:0}
</style>
</head>

<body>

<div class="card" id="cartilla">
  <h1>ğŸ¾ CARTILLA MÃ‰DICA</h1>

  <div class="section">
    <h3>ğŸ‘¤ DueÃ±o</h3>
    <p id="dueno">â€”</p>
  </div>

  <div class="section">
    <h3>ğŸ¶ Mascota</h3>
    <p id="mascota">â€”</p>
  </div>

  <div class="section">
    <h3>ğŸ’‰ Vacunas</h3>
    <ul id="vacunas"></ul>
  </div>

  <div class="section">
    <h3>ğŸ©º Historial MÃ©dico</h3>
    <ul id="historial"></ul>
  </div>

  <button class="btn" onclick="exportar()">ğŸ“„ Exportar cartilla</button>
  <button class="btn back" onclick="volver()">â¬… Volver</button>
</div>

<script>
function exportar(){
  window.print(); // âœ” EXPORTA BIEN
}

function volver(){
  window.location.href="home.html";
}

// ğŸ” Recibir TODO desde MIT
function recibir(){
  try{
    const data = JSON.parse(window.AppInventor.getWebViewString());

    if(data.dueno){
      document.getElementById("dueno").innerText = data.dueno;
    }

    if(data.mascota){
      document.getElementById("mascota").innerText = data.mascota;
    }

    if(data.vacunas){
      const ul=document.getElementById("vacunas");
      ul.innerHTML="";
      data.vacunas.forEach(v=>{
        const li=document.createElement("li");
        li.innerText=v;
        ul.appendChild(li);
      });
    }

    if(data.historial){
      const ul=document.getElementById("historial");
      ul.innerHTML="";
      data.historial.forEach(h=>{
        const li=document.createElement("li");
        li.innerText=h;
        ul.appendChild(li);
      });
    }
  }catch(e){}
}
setInterval(recibir,600);
</script>

</body>
</html>
